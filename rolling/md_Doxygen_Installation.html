<!-- HTML header for doxygen 1.8.15-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Toolkit for Adaptive Stochastic Modeling and Non-Intrusive ApproximatioN: Tasmanian v7.5: Installation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="tasmanian.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
    <div class="doxygen">
            <a href="http://www.doxygen.org/index.html">
                <img class="footer" src="doxygen.png" alt="doxygen"/>
                </a> 1.8.13
    </div>
   <div id="projectname">Toolkit for Adaptive Stochastic Modeling and Non-Intrusive ApproximatioN: Tasmanian v7.5
           <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('md_Doxygen_Installation.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Installation </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h3>Document Sections</h3>
<ul>
<li>Requirements</li>
<li>Install using CMake: the preferred way</li>
<li>Install with the <code>install</code> script-wrapper around CMake</li>
<li>Install with (basic) GNU Make</li>
<li>Install with Python Pip</li>
<li>Install with Spack</li>
<li>Install on MS Windows platform</li>
<li>Install folder structure</li>
<li>Linking to Tasmanian: CMake Package Config</li>
<li>Known issues</li>
</ul>
<h3>Requirements</h3>
<p>Minimum requirements to use Tasmanian:</p><ul>
<li>a C/C++ compiler and either <a href="https://cmake.org/">CMake</a> or <a href="https://www.gnu.org/software/make/">GNU Make</a> build engines.</li>
</ul>
<p>Recommended additional features:</p><ul>
<li><a href="https://www.python.org/">Python</a> with with <a href="http://www.numpy.org/">NumPy</a> 1.10 (or newer) and <a href="https://docs.python.org/3/library/ctypes.html">CTypes</a> packages</li>
<li><a href="https://en.wikipedia.org/wiki/Basic_Linear_Algebra_Subprograms">Basic Linear Algebra Subroutine (BLAS)</a> implementation</li>
<li><a href="http://www.netlib.org/lapack/">Linear Algebra PACKage</a> implementation</li>
<li><a href="https://en.wikipedia.org/wiki/OpenMP">OpenMP</a> implementation (usually included with the compiler)</li>
</ul>
<p>Optional features:</p><ul>
<li>Acceleration using Nvidia <a href="https://developer.nvidia.com/cublas">linear algebra libraries</a> and custom <a href="https://developer.nvidia.com/cuda-zone">CUDA kernels</a></li>
<li>Acceleration using AMD ROCm <a href="https://rocsparse.readthedocs.io/en/master/">linear algebra libraries</a> and custom <a href="https://rocmdocs.amd.com/en/latest/ROCm_API_References/HIP-API.html">HIP kernels</a></li>
<li>Acceleration using Intel OneAPI <a href="https://software.intel.com/content/www/us/en/develop/tools/oneapi/components/onemkl.html">oneMKL</a> and custom <a href="https://software.intel.com/content/www/us/en/develop/tools/oneapi.html">DPC++ kernels</a></li>
<li>GPU accelerated linear algebra using <a href="http://icl.cs.utk.edu/magma/">UTK MAGMA library</a></li>
<li>Basic <a href="https://matplotlib.org/">Python matplotlib</a> support</li>
<li>Fully featured <a href="https://www.gnu.org/software/octave/">MATLAB/Octave</a> interface via wrappers around the command-line tool</li>
<li>Fortran 90/95 interface using <a href="https://gcc.gnu.org/wiki/GFortran">gfortran</a> or <a href="https://software.intel.com/en-us/intel-compilers">ifort</a> or <a href="https://www.pgroup.com/index.htm">pgf90</a></li>
<li>Addon templates for the <a href="https://en.wikipedia.org/wiki/Message_Passing_Interface">Message Passing Interface (MPI)</a></li>
<li><a href="http://www.doxygen.org/">Doxygen</a> documentation</li>
</ul>
<p><b>Note:</b> with the exception of the Intel and PGI compilers and the MAGMA library, the rest of the software is included in the repositories of most Linux distributions, e.g., <a href="https://www.ubuntu.com/">Ubuntu</a> or <a href="https://getfedora.org/">Fedora</a>, as well as <a href="https://brew.sh/">Mac OSX Homebrew</a>.</p>
<table class="doxtable">
<tr>
<th>Feature </th><th>Tested versions </th><th>Recommended  </th></tr>
<tr>
<td>gcc </td><td>5 - 10 </td><td>any </td></tr>
<tr>
<td>clang </td><td>4 - 10 </td><td>any </td></tr>
<tr>
<td>icc </td><td>18.0 </td><td>18.0 </td></tr>
<tr>
<td>xl </td><td>16.1 </td><td>16.1 </td></tr>
<tr>
<td>pgi </td><td>19.10 </td><td>19.10 </td></tr>
<tr>
<td>cmake </td><td>3.10 - 3.17 </td><td>3.10 </td></tr>
<tr>
<td>python </td><td>2.7, 3.5, 3.6 </td><td>3.5 or 3.6 </td></tr>
<tr>
<td>anaconda</td><td>5.3 </td><td>5.3 </td></tr>
<tr>
<td>OpenBlas</td><td>0.2.18 - 3.08 </td><td>any </td></tr>
<tr>
<td>ATLAS </td><td>3.10 </td><td>3.10 </td></tr>
<tr>
<td>ESSL </td><td>6.2 </td><td>6.2 </td></tr>
<tr>
<td>CUDA </td><td>8.0 - 11 </td><td>10.2 </td></tr>
<tr>
<td>ROCm </td><td>3.8 </td><td>3.8 </td></tr>
<tr>
<td>libiomp </td><td>5.0 </td><td>5.0 </td></tr>
<tr>
<td>MAGMA </td><td>2.5.1 - 2.5.3 </td><td>2.5.3 </td></tr>
<tr>
<td>Doxygen </td><td>1.8.13 </td><td>1.8.13 </td></tr>
<tr>
<td>MPI </td><td>2.1, 3.1 </td><td>3.1 </td></tr>
</table>
<h3>Install using CMake: the preferred way</h3>
<p>The preferred way to install Tasmanian is to use the included CMake build script, which requires CMake version 3.10 or newer. Note that as of 7.3 Tasmanian CMake no longer builds both shared and static libraries, only one type of libraries will be build and <code>BUILD_SHARED_LIBS</code> is always defined defaulting to <code>ON</code> following the CMake and xSDK guidelines.</p>
<ul>
<li>The commands for an out-of-source CMake build: <div class="fragment"><div class="line">mkdir Build</div><div class="line">cd Build</div><div class="line">cmake &lt;options&gt; &lt;path-to-Tasmanian-source&gt;</div><div class="line">make</div><div class="line">make test</div><div class="line">make install</div><div class="line">make test_install</div></div><!-- fragment --></li>
<li>Standard CMake options are accepted: <div class="fragment"><div class="line">-D CMAKE_INSTALL_PREFIX:PATH=&lt;install-prefix&gt; (install folder for the make install command)</div><div class="line">-D CMAKE_BUILD_TYPE:STRING=&lt;Debug/Release&gt;    (set debug flags or default optimization flags)</div><div class="line">-D BUILD_SHARED_LIBS:BOOL=&lt;ON/OFF&gt;            (pick shared/static libs)</div><div class="line">-D CMAKE_CXX_COMPILER:PATH=&lt;path&gt;             (specify the C++ compiler, or HIP/ROCm compiler)</div><div class="line">-D CMAKE_CUDA_COMPILER:PATH=&lt;path&gt;            (specify the CUDA nvcc compiler)</div><div class="line">-D CMAKE_CXX_FLAGS:STING=&lt;flags&gt;              (set additional flags)</div></div><!-- fragment --></li>
<li>List of Tasmanian specific CMake options (all default to <b>OFF</b>): <div class="fragment"><div class="line">-D Tasmanian_ENABLE_OPENMP:BOOL=&lt;ON/OFF&gt;      (recommended)</div><div class="line">-D Tasmanian_ENABLE_BLAS:BOOL=&lt;ON/OFF&gt;        (recommended)</div><div class="line">-D Tasmanian_ENABLE_PYTHON:BOOL=&lt;ON/OFF&gt;      (recommended)</div><div class="line">-D Tasmanian_ENABLE_RECOMMENDED:BOOL=&lt;ON/OFF&gt; (enable the above and the -O3 flag)</div><div class="line">-D Tasmanian_ENABLE_CUDA:BOOL=&lt;ON/OFF&gt;        (stable)</div><div class="line">-D Tasmanian_ENABLE_HIP:BOOL=&lt;ON/OFF&gt;         (stable)</div><div class="line">-D Tasmanian_ENABLE_DPCPP:BOOL=&lt;ON/OFF&gt;       (mostly stable)</div><div class="line">-D Tasmanian_ENABLE_MAGMA:BOOL=&lt;ON/OFF&gt;       (stable)</div><div class="line">-D Tasmanian_MATLAB_WORK_FOLDER:PATH=&quot;&quot;       (stable)</div><div class="line">-D Tasmanian_ENABLE_DOXYGEN:BOOL=&lt;ON/OFF&gt;     (stable)</div><div class="line">-D Tasmanian_ENABLE_FORTRAN:BOOL=&lt;ON/OFF&gt;     (mostly stable)</div><div class="line">-D Tasmanian_ENABLE_MPI:BOOL=&lt;ON/OFF&gt;         (mostly stable)</div></div><!-- fragment --></li>
<li>Acceleration options:<ul>
<li>OpenMP allows Tasmanian to use more than one CPU core, which greatly increases the performance</li>
<li>Basic Linear Algebra Subroutines (BLAS) is a standard with many implementations, e.g., <a href="https://www.openblas.net/">https://www.openblas.net/</a>; optimized BLAS improves the performance when using evaluate commands on grids with many points or working with models with many outputs</li>
<li>Linear Algebra PACKage (LAPACK) is a set of advanced solver, eigen-solvers and decomposition methods that build upon BLAS and is usually included in the same packge, e.g., OpenBLAS, MKL, ESSL, and ATLAS; within Tasmanian, the name BLAS in CMake or run-time options indicate the dependence and usage of both BLAS and LAPACK</li>
<li>CUDA is a C++ language extension that allows Tasmanian to leverage the computing power of Nvidia GPU devices, which greatly enhances the performance of <code>evaluateFast()</code> and <code>evaluateBatch()</code> and a few other calls</li>
<li>HIP/ROCm is very similar to CUDA but uses AMD GPU devices instead, Tasmanian supports a HIP backend</li>
<li>DPC++/OneAPI is the Intel alternative to CUDA and HIP, Tasmanian supports a DPC++ backend</li>
<li>Matrix Algebra on GPU and Multicore Architectures (MAGMA) is a library for GPU accelerated linear algebra developed at the University of Tennessee at Knoxville</li>
<li>MPI allows the use of distributed memory in Bayesian inference, parallel model construction, and send/receive grid through an MPI comm</li>
</ul>
</li>
<li>The <b>Tasmanian_ENABLE_RECOMMENDED</b> option searches for OpenMP, BLAS, and Python, enables the options (if possible) and also sets the <code>-O3</code> flag</li>
<li>Additional interfaces are available, beyond the default C/C++ library and the command line tools:<ul>
<li>Python and Fortran require appropriate interpreter and compiler</li>
<li>The MATLAB/Octave interface requires a work-folder with read/write permission for temporary files. The interface is enabled by setting <b>Tasmanian_MATLAB_WORK_FOLDER</b> to a valid read/write location.</li>
</ul>
</li>
<li>The Doxygen option will build the HTML documentation</li>
<li>Options to adjust the testing environment: by default Tasmanian testing will use the system provided OpenMP parameters and run tests on all visible Nvidia GPU devices; specific number of threads and device can be selected (note that only the testing environment is affected here): <div class="fragment"><div class="line">-D Tasmanian_TESTS_OMP_NUM_THREADS=&lt;number-of-threads-for-testing&gt; (only used with OpenMP)</div><div class="line">-D Tasmanian_TESTS_GPU_ID=&lt;cuda-device-id-for-testing&gt;             (only used with CUDA)</div></div><!-- fragment --></li>
<li>Additional commands to guide the CMake <code>find_package()</code> modules: <div class="fragment"><div class="line">-D PYTHON_EXECUTABLE:PATH            (specify the Python interpreter)</div><div class="line">-D CMAKE_CUDA_COMPILER:PATH          (specify the CUDA nvcc compiler)</div><div class="line">-D CMAKE_Fortran_COMPILER:PATH       (specify the Fortran compiler)</div><div class="line">-D Tasmanian_ROCM_ROOT:PATH          (specify the path to the ROCm installation)</div><div class="line">-D Tasmanian_MKL_SYCL_ROOT:PATH      (specify the path to the oneMKL installation)</div><div class="line">-D Tasmanian_MAGMA_ROOT:PATH         (specify the path to the MAGMA installation)</div><div class="line">-D MPI_CXX_COMPILER:PATH=&lt;path&gt;      (specify the MPI compiler wrapper)</div><div class="line">-D MPI_Fortran_COMPILER:PATH=&lt;path&gt;  (needed for MPI with Fortran)</div><div class="line">-D MPIEXEC_EXECUTABLE:PATH=&lt;path&gt;    (needed for MPI testing)</div></div><!-- fragment --></li>
<li>The ROCm and MAGMA options can be passed without the <em>Tasmanian_</em> prefix and if not specified explicitly those will be read from the OS environment.</li>
<li>The <b>ROCm</b> capabilities require that the CMake CXX compiler is set to <em>hipcc</em>.</li>
<li>The <b>OneAPI</b> capabilities require:<ul>
<li>the CMake CXX compiler is set to <em>dpcpp</em></li>
<li><code>Tasmanian_ENABLE_BLAS</code> is set to <b>ON</b></li>
<li>BLAS is set to the CPU version of MKL, e.g., using <code>BLAS_LIBRARIES</code></li>
</ul>
</li>
<li>Alternatives allowing to directly specify libraries and bypass <code>find_package()</code> altogether: <div class="fragment"><div class="line">-D BLAS_LIBRARIES</div><div class="line">-D LAPACK_LIBRARIES</div></div><!-- fragment --></li>
<li>Extra options are available in case CMake fails to find a required dependency, e.g., <code>find_package()</code> sometimes fails to acknowledge that the ACML implementation of BLAS depends on both <code>libgfortran</code> and <code>libgomp</code>; the manual options below should not be necessary in the majority of cases: <div class="fragment"><div class="line">-D Tasmanian_EXTRA_LIBRARIES:LIST   (add more libraries as dependencies)</div><div class="line">-D Tasmanian_EXTRA_INCLUDE_DIRS:PATH  (add more include paths to search for headers)</div><div class="line">-D Tasmanian_EXTRA_LINK_DIRS:PATH     (appends more link paths to search for libraries)</div></div><!-- fragment --></li>
<li>Options helpful to Tasmanian developers: <div class="fragment"><div class="line">-D DOXYGEN_INTERNAL_DOCS=YES  (include the documentation of the Tasmanian internals)</div></div><!-- fragment --></li>
</ul>
<h3>Install with the install script-wrapper around CMake</h3>
<p>Tasmanian also includes an <code>install</code> script that wraps around CMake and automatically calls the build commands. The script uses <code>Tasmanian_ENABLE_RECOMMENDED</code> option and allows for other options to be enabled/disabled with command line switches.</p>
<ul>
<li>Basic usage of the <code>install</code> script <div class="fragment"><div class="line">./install &lt;install-path&gt; &lt;optional: matlab-work-folder&gt; &lt;extra switches&gt;</div><div class="line">./install --help  (list all switches)</div></div><!-- fragment --></li>
<li>Example call that enables MATLAB/Octave and CUDA <div class="fragment"><div class="line">./install /home/me/Tasmanian /home/me/Tasmanian/WorkFolder -cuda=/usr/local/cuda-9.2/bin/nvcc</div></div><!-- fragment --></li>
<li>Additional notes:<ul>
<li>the script must be called from the main source code folder</li>
<li>using absolute paths is strongly recommended</li>
<li>if the MATLAB work-folder is omitted, the MATLAB interface will be disabled</li>
</ul>
</li>
</ul>
<h3>Install with (basic) GNU Make</h3>
<p>The core capabilities of Tasmanian can be build with a few simple GNU Make commands. The basic build engine is useful for quick testing and exploring Tasmanian, or if CMake is unavailable or unwanted. Acceleration options other than OpenMP are not supported in the basic mode.</p>
<ul>
<li>Using GNU Make with <code>g++</code> and optionally <code>gfortran</code> and <code>/usr/bin/env python</code> <div class="fragment"><div class="line">make</div><div class="line">make test     (will fail if /usr/bin/env python is missing the numpy or ctypes modules)</div><div class="line">make matlab   (optional: sets matlab work folder to ./tsgMatlabWorkFolder/)</div><div class="line">make python3  (optional: sets #!/usr/bin/env python3 in place of /usr/bin/env python)</div><div class="line">make fortran  (optional: compile Fortran libraries)</div><div class="line">make examples</div><div class="line">make clean</div></div><!-- fragment --> In the basic mode, the source folder will become the installation folder, i.e., the libraries, executables and Python modules will be build in the source folder and the headers and the Fortran module will be copied to the <code>include</code> folder.</li>
</ul>
<h3>Install with Python Pip</h3>
<p>Tasmanian is included in the Python Pip index: <a href="https://pypi.org/project/Tasmanian/">https://pypi.org/project/Tasmanian/</a> </p><div class="fragment"><div class="line">python3 -m pip install Tasmanian --user   (user installation)</div><div class="line">python3 -m pip install Tasmanian          (virtual env installation)</div></div><!-- fragment --><p> Pip versions prior to 1.10 cannot handle the extra dependencies, those must be installed manually </p><div class="fragment"><div class="line">python3 -m pip install scikit-build packaging numpy --user</div></div><!-- fragment --><p>The Tasmanian module is not a regular Python-only project but a wrapper around the C++ libraries, note the following:</p><ul>
<li>Pip versions prior to 1.10 require that dependencies are installed manually.</li>
<li>Only user installations are supported, installation for all users is possible with CMake but not Pip.</li>
<li>Python virtual environments are supported, as well as Linux, Mac and Windows operating systems.</li>
<li>The Pip installer will accept Tasmanian options specified in the environment variables: <div class="fragment"><div class="line">Environment Option will translate to               CMake Options</div><div class="line">export Tasmanian_ENABLE_BLAS=&lt;blas-lapack-libs&gt;    -D Tasmanian_ENABLE_BLAS=ON</div><div class="line">                                                   -D BLAS_LIBRARIES=&lt;blas-lapack-libs&gt;</div><div class="line">                                                   -D LAPACK_LIBRARIES=&lt;blas-lapack-libs&gt;</div><div class="line">export Tasmanian_ENABLE_CUDA=&lt;cuda-nvcc&gt;           -D Tasmanian_ENABLE_CUDA=ON</div><div class="line">                                                   -D CMAKE_CUDA_COMPILER=&lt;cuda-nvcc&gt;</div><div class="line">export Tasmanian_ENABLE_MAGMA=&lt;magma-root&gt;         -D Tasmanian_ENABLE_MAGMA=ON</div><div class="line">                                                   -D Tasmanian_MAGMA_ROOT_DIR=&lt;magma-root&gt;</div><div class="line">export Tasmanian_ENABLE_MPI=&lt;mpicxx&gt;               -D Tasmanian_ENABLE_MPI=ON</div><div class="line">                                                   -D MPI_CXX_COMPILER=&lt;mpicxx&gt;</div><div class="line">export Tasmanian_MATLAB_WORK_FOLDER=&lt;path&gt;         -D Tasmanian_MATLAB_WORK_FOLDER=&lt;path&gt;</div></div><!-- fragment --></li>
<li>note that the environment variables work only with Python Pip</li>
<li>Example virtual install looks like this: <div class="fragment"><div class="line">python3 -m venv tasmanian_virtual_env                   # create a virtual environment</div><div class="line">source ./tasmanian_virtual_env/bin/activate             # activate the virtual environment</div><div class="line">export Tasmanian_ENABLE_CUDA=/usr/local/cuda/bin/nvcc   # specify the CUDA compiler</div><div class="line">python -m pip install Tasmanian                         # will install Tasmanian with CUDA</div><div class="line">python -m Tasmanian                                     # print the install log</div><div class="line">./tasmanian_virtual_env/bin/tasgrid -v                  # print the available CUDA devices</div></div><!-- fragment --></li>
</ul>
<p>Additional notes:</p><ul>
<li>under MS Windows the environment variables can be set from Advanced System Settings, but the paths should use Linux style of back-slashes, e.g., <code>C:/Program Files/CUDA/bin/nvcc.exe</code></li>
<li>scikit build does not support the latest <code>Visual Studio 16 2019</code>, regular CMake install works fine</li>
<li>under OSX some users have reported segfaults when using a pip install, the problem does not appear when using CMake or the install script, the issue is under investigation</li>
</ul>
<h3>Install with Spack</h3>
<p>Tasmanian is also included in Spack: <a href="https://spack.io/">https://spack.io/</a> </p><div class="fragment"><div class="line">spack install tasmanian@7.0+openmp+blas+cuda+magma+python+fortran</div></div><!-- fragment --><h3>Install on MS Windows platform</h3>
<p>Tasmanian has been tested with MS Visual Studio 2017 and 2019.</p>
<ul>
<li>First use the CMake GUI to set the folders and options</li>
<li>Then use the command prompt (<code>cmd.exe</code>) to enter the build folder <div class="fragment"><div class="line">cd &lt;cmake-build-folder&gt;</div><div class="line">cmake --build . --config Release</div><div class="line">ctest -C Release</div><div class="line">cmake --build . --config Release --target install</div></div><!-- fragment --></li>
<li>Both Debug and Release are supported config modes, but do not use them simultaneously, pick only one Release or Debug.</li>
</ul>
<h3>Install folder structure</h3>
<p>Tasmanian follows standard Linux conventions, the install path could be set to <code>/usr/local/</code>, although it is recommended to install in a location inside the user home folder to avoid potential system-wide conflicts.</p>
<ul>
<li>Install folder structure: <div class="fragment"><div class="line">&lt;install-path&gt;/bin/                       (tagrid executable tool)</div><div class="line">&lt;install-path&gt;/lib/                       (shared or static libraries)</div><div class="line">&lt;install-path&gt;/lib/Tasmanian/             (cmake package-config files)</div><div class="line">&lt;install-path&gt;/lib/pythonX.Y/             (python module)</div><div class="line">&lt;install-path&gt;/include/                   (headers .h and .hpp, and Fortran .mod)</div><div class="line">&lt;install-path&gt;/share/Tasmanian            (bash env scripts, install log, table)</div><div class="line">&lt;install-path&gt;/share/Tasmanian/examples/  (reference examples)</div><div class="line">&lt;install-path&gt;/share/Tasmanian/matlab/    (matlab scripts)</div><div class="line">&lt;install-path&gt;/share/Tasmanian/python/    (copy of &lt;install-path&gt;/lib/pythonX.Y)</div></div><!-- fragment --></li>
</ul>
<p>Additional notes:</p><ul>
<li>A summary of all compile options is stored in <div class="fragment"><div class="line">&lt;install-path&gt;/share/Tasmanian/Tasmanian.log</div></div><!-- fragment --></li>
<li>The log file can be displayed with wither command: <div class="fragment"><div class="line">&lt;install-path&gt;/bin/tasgrid -log  (using the command line tool)</div><div class="line">python -m Tasmanian              (only if Python is enabled)</div></div><!-- fragment --></li>
<li>The executable and library paths, as well as the Python path can be set in <code>bash</code> by sourcing <div class="fragment"><div class="line">source &lt;install-path&gt;/share/Tasmanian/TasmanianENVsetup.sh</div></div><!-- fragment --></li>
<li>When using pip, the python module location may be different depending on the OS and the Python virtual environment.</li>
<li>The Python module is version independent, i.e., the files work with all tested Python versions; the <code>share/Tasmanian/python</code> copy allows for easy and version independent access to the Tasmanian modules.</li>
<li>Under MS Windows the shared libraries (e.g., the .dll files) are installed in <code>bin</code>.</li>
</ul>
<h3>Linking to Tasmanian: CMake Package Config</h3>
<p>Tasmanian will install CMake package-config files in <code>&lt;install-path&gt;/lib/Tasmanian</code>, the files will contain all necessary information to import the Tasmanian targets into other CMake projects using the CMake command: </p><div class="fragment"><div class="line">find_package(Tasmanian 7.0 PATHS &quot;&lt;install-path&gt;&quot;)</div></div><!-- fragment --><p> See the included <code>CMakeLists.txt</code> in <code>&lt;install-path&gt;/share/Tasmanian/examples</code>.</p>
<p>Note that the <code>PATHS</code> do not have to be specified explicitly if the <code>TasmanianENVsetup.sh</code> is sourced or if the <code>Tasmanian_ROOT</code> environment variable is set. The correct <code>find_package()</code> command is displayed in the log (see the previous section).</p>
<p>The imported targets will be named: </p><div class="fragment"><div class="line">Tasmanian::Tasmanian  (links to the C++ libraries)</div><div class="line">Tasmanian::tasgrid    (imported executable pointing to the command line tool)</div><div class="line">Tasmanian::Fortran    (links to the C++ libraries and the Fortran wrappers)</div></div><!-- fragment --><ul>
<li><code>Tasmanian::Tasmanian</code> and <code>Tasmanian::Fortran</code> targets are no longer equivalent, as of version 7.1</li>
<li><code>::shared</code> and <code>::static</code> targets are deprecated since Tasmanian builds only one type of libraries now</li>
</ul>
<p>In addition, the following variables will be set: </p><div class="fragment"><div class="line">Tasmanian_PYTHONPATH         (path to the Python module, if Python was enabled)</div><div class="line">Tasmanian_MATLAB_WORK_FOLDER (path to the MATLAB work folder, if set during build)</div><div class="line">Tasmanian_MATLABPATH         (path to the MATLAB scripts, if MATLAB was enabled)</div><div class="line">Tasmanian_&lt;component&gt;_FOUND  (set to ON for each available component)</div></div><!-- fragment --><p> The possible components are: </p><div class="fragment"><div class="line">SHARED STATIC OPENMP BLAS CUDA HIP MAGMA MPI PYTHON MATLAB FORTRAN</div></div><!-- fragment --><p> The modules correspond to shared and static libraries and the cmake options used during build.</p>
<p>All available components will be included even if the component is not explicitly requested. Requesting components can help catch errors early in the build process and/or print useful log messages. For example: </p><div class="fragment"><div class="line">find_package(Tasmanian 7.0 REQUIRED SHARED PYTHON CUDA OPTIONAL_COMPONENTS OPENMP)</div></div><!-- fragment --><p> In the above example:</p><ul>
<li>an error will be generated if Tasmanian was build with static libraries, no CUDA or no Python support</li>
<li>a status message will report whether Tasmanian was build with OpenMP support</li>
</ul>
<p><b>Note</b> that as of version 7.3, Tasmanian no longer builds both static and shared libraries, only one type will be build at a time.</p>
<h3>Known Issues</h3>
<p>Several known issues and work-around fixes:</p><ul>
<li>The addon tests sometime fail due to thread scheduling<ul>
<li>The overhead associated with thread scheduling is much larger than the simple test models used, which leads to unrealistically large fluctuations in sample run-time, which in turn leads to randomness in the results, most notably on machines with few cpu cores.</li>
<li>Rerun the tests and/or installation to see if the problem is persistent</li>
</ul>
</li>
<li>Mixing the GCC and Clang compilers and linkers sometimes fails with an error about the architecture<ul>
<li>use shared libraries only, i.e., <code>-D BUILD_SHARED_LIBS=ON</code> in CMake</li>
</ul>
</li>
<li>The older versions of the PGI compiler fails when using optimization <code>-O2</code><ul>
<li>use the <code>-O1</code> instead, or the newest version of the compiler</li>
</ul>
</li>
<li>XL with OpenMP segfaults if the OMP_NUM_THREADS is not set correctly</li>
<li>in version 7.3 documentation has to be build with <code>make Tasmanian_doxygen</code> as it is not added to target <code>all</code></li>
<li>Older versions of CUDA do not work with newer versions of some compilers, e.g., <code>gcc</code><ul>
<li>consult the CUDA manual for a list of acceptable compilers </li>
</ul>
</li>
</ul>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.15-->
<!-- start footer part -->
<!-- <div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
<!--  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div> -->
</body>
</html>
